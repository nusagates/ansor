import{m as j,t as v,u as N,r as M,i as $,c as U,e as V,g as D,b as e,w as t,F as K,a as i,o as _,X as G,f as d,j as O,d as B}from"./app-bee8323a.js";import{C as Z}from"./Container-010988fd.js";import{_ as ee}from"./Toast.vue_vue_type_script_setup_true_lang-42770665.js";import{_ as T,P as te}from"./Auth-d407c5c3.js";import"./_plugin-vue_export-helper-c27b6911.js";const ae={__name:"DateFormat",props:["date"],setup(p){const c=p,r=j(()=>{const s=/^\d{4}-\d{2}-\d{2}$/;let l;if(s.test(c.date)){const a=new Date(c.date);l=a.toLocaleString("id-ID",{weekday:"long"}),l+=", "+a.getDate(),l+=" "+a.toLocaleString("id-ID",{month:"long"}),l+=" "+a.getFullYear()}else l=c.date;return l});return(s,l)=>v(N(r))}},P={__name:"TimeFormat",props:["time"],setup(p){const c=p,r=j(()=>{const s=/^\d{2}:\d{2}:\d{2}$/;let l;if(s.test(c.time)){const a=new Date(`2023-04-10 ${c.time}`);let h=a.getHours()<10?"0"+a.getHours():a.getHours(),w=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes();l=h+":"+w}else l=c.time;return l});return(s,l)=>v(N(r))}};const ne=B("h3",null,"Jadwal Kegiatan",-1),le=["textContent"],oe=["textContent"],re={__name:"Event",props:{showNav:{default:!0,type:Boolean},showTitle:{default:!0,type:Boolean}},setup(p){const c=M(),r=M(null),s=$({event:{create:!1,delete:!1}}),l=$({event:{get:!1,store:!1,update:!1,delete:!1}}),a=$({event:{id:null,name:null,activity_date:null,started_at:null,finished_at:null,venue:null,organizer:null,is_public:!0,notes:null}}),h=()=>{a.event={id:null,name:null,activity_date:null,started_at:null,finished_at:null,venue:null,organizer:null,is_public:!0,notes:null},s.event.create=!0},w=()=>{l.event.store=!0,axios.post("/event",a.event).then(u=>{u.data.code===200?(c.value.show(u.data.message,"success"),s.event.create=!1,b()):c.value.show(u.data.message,"red")}).finally(()=>{l.event.store=!1})},I=()=>{l.event.update=!0,axios.patch(`/event/${a.event.id}`,a.event).then(u=>{u.data.code===200?(c.value.show(u.data.message,"success"),s.event.create=!1,b()):c.value.show(u.data.message,"red")}).finally(()=>{l.event.update=!1})},b=(u=1)=>{l.event.get=!0,axios.get(`/event?page=${u}`).then(o=>{l.event.get=!1,r.value=o.data.data})},L=u=>{a.event=u,s.event.create=!0},W=()=>{l.event.delete=!0,axios.delete(`/event/${a.event.id}`).then(u=>{u.data.code===200?(c.value.show(u.data.message,"success"),s.event.delete=!1,b()):c.value.show(u.data.message,"red")}).finally(()=>{l.event.delete=!1})};return b(),(u,o)=>{const f=i("v-icon"),m=i("v-btn"),g=i("v-sheet"),J=i("v-divider"),x=i("v-list-item"),Q=i("v-timeline-item"),q=i("v-timeline"),C=i("v-card-text"),E=i("v-card"),z=i("v-toolbar-title"),k=i("v-spacer"),F=i("v-toolbar"),y=i("v-text-field"),A=i("QuillEditor"),R=i("v-checkbox"),S=i("v-card-actions"),H=i("v-dialog");return _(),U(K,null,[p.showTitle?(_(),V(N(G),{key:0,title:"Jadwal Kegiatan"})):D("",!0),e(Z,{"show-nav":p.showNav},{content:t(()=>[e(E,{flat:""},{title:t(()=>[e(g,{class:"d-flex justify-space-between"},{default:t(()=>[ne,e(T,{can:"Read Event"},{default:t(()=>[e(m,{onClick:h,variant:"text"},{default:t(()=>[e(f,null,{default:t(()=>[d("mdi-plus")]),_:1}),d(" Tambah ")]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(J,{class:"border-opacity-100"}),e(C,null,{default:t(()=>[e(q,{density:"compact",align:"start","truncate-line":"start"},{default:t(()=>[r.value!==null?(_(!0),U(K,{key:0},O(r.value.data,(n,X)=>(_(),V(Q,{"dot-color":X%2===0?"teal":"amber",size:"x-small"},{default:t(()=>[e(g,null,{default:t(()=>[B("h2",{class:"text-overline",textContent:v(n.name)},null,8,le),e(g,{style:{"margin-left":"-20px"}},{default:t(()=>[e(x,{density:"compact","prepend-icon":"mdi-account",class:"text-body-2"},{default:t(()=>[d(v(n.organizer),1)]),_:2},1024),e(x,{density:"compact","prepend-icon":"mdi-calendar",class:"text-body-2"},{default:t(()=>[e(ae,{date:n.activity_date},null,8,["date"]),d(" Â  "),e(f,null,{default:t(()=>[d("mdi-clock-outline")]),_:1}),e(P,{time:n.started_at},null,8,["time"]),n.finished_at!==null?(_(),U(K,{key:0},[d(" - "),e(P,{time:n.finished_at},null,8,["time"])],64)):D("",!0),d(" WIB ")]),_:2},1024),e(x,{density:"compact","prepend-icon":"mdi-map-marker",class:"text-body-2"},{default:t(()=>[d(v(n.venue),1)]),_:2},1024),e(x,{density:"compact","prepend-icon":"mdi-bullhorn",class:"text-body-2"},{default:t(()=>[d(v(n.is_public?"untuk Umum":"Kalangan Terbatas"),1)]),_:2},1024),e(g,{class:"ml-8"},{default:t(()=>[e(T,{can:"Update Event"},{default:t(()=>[e(m,{onClick:Y=>L(n),density:"compact",variant:"text",icon:""},{default:t(()=>[e(f,null,{default:t(()=>[d("mdi-square-edit-outline")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),e(T,{can:"Delete Event"},{default:t(()=>[e(m,{onClick:Y=>{a.event=n,s.event.delete=!0},density:"compact",variant:"text",icon:""},{default:t(()=>[e(f,null,{default:t(()=>[d("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["dot-color"]))),256)):D("",!0)]),_:1}),e(g,{class:"d-flex justify-center"},{default:t(()=>[e(te,{data:r.value,method:b,"total-visible":"0"},null,8,["data"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show-nav"]),e(H,{modelValue:s.event.create,"onUpdate:modelValue":o[9]||(o[9]=n=>s.event.create=n),fullscreen:""},{default:t(()=>[e(E,null,{default:t(()=>[e(F,{density:"compact",color:"teal"},{default:t(()=>[e(z,null,{default:t(()=>[d("Tambah Kegiatan")]),_:1}),e(k),e(m,{onClick:o[0]||(o[0]=n=>s.event.create=!1),icon:""},{default:t(()=>[e(f,null,{default:t(()=>[d("mdi-close")]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(y,{density:"compact",label:"Nama Kegiatan",modelValue:a.event.name,"onUpdate:modelValue":o[1]||(o[1]=n=>a.event.name=n)},null,8,["modelValue"]),e(y,{density:"compact",label:"Tanggal Kegiatan",modelValue:a.event.activity_date,"onUpdate:modelValue":o[2]||(o[2]=n=>a.event.activity_date=n),type:"date"},null,8,["modelValue"]),e(y,{density:"compact",label:"Waktu Mulai",modelValue:a.event.started_at,"onUpdate:modelValue":o[3]||(o[3]=n=>a.event.started_at=n),type:"time"},null,8,["modelValue"]),e(y,{density:"compact",label:"Waktu Selesai",modelValue:a.event.finished_at,"onUpdate:modelValue":o[4]||(o[4]=n=>a.event.finished_at=n),type:"time"},null,8,["modelValue"]),e(y,{density:"compact",label:"Tempat Kegiatan",modelValue:a.event.venue,"onUpdate:modelValue":o[5]||(o[5]=n=>a.event.venue=n)},null,8,["modelValue"]),e(y,{density:"compact",label:"Penyelenggara",modelValue:a.event.organizer,"onUpdate:modelValue":o[6]||(o[6]=n=>a.event.organizer=n)},null,8,["modelValue"]),e(g,{"max-height":"300"},{default:t(()=>[e(A,{placeholder:"Keterangan Kegiatan",theme:"snow","content-type":"html",content:a.event.notes,"onUpdate:content":o[7]||(o[7]=n=>a.event.notes=n)},null,8,["content"])]),_:1}),e(R,{label:"Kegiatan untuk Umum",modelValue:a.event.is_public,"onUpdate:modelValue":o[8]||(o[8]=n=>a.event.is_public=n)},null,8,["modelValue"])]),_:1}),e(S,null,{default:t(()=>[e(k),a.event.id===null?(_(),V(m,{key:0,onClick:w,density:"compact",color:"teal",loading:l.event.store,disabled:l.event.store},{default:t(()=>[d("Simpan")]),_:1},8,["loading","disabled"])):(_(),V(m,{key:1,onClick:I,density:"compact",color:"teal",loading:l.event.update,disabled:l.event.update},{default:t(()=>[d("Perbarui")]),_:1},8,["loading","disabled"]))]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(H,{modelValue:s.event.delete,"onUpdate:modelValue":o[11]||(o[11]=n=>s.event.delete=n),width:"300"},{default:t(()=>[e(E,null,{default:t(()=>[e(F,{density:"compact",color:"warning"},{default:t(()=>[e(z,null,{default:t(()=>[d("Konfirmasi")]),_:1}),e(k),e(m,{onClick:o[10]||(o[10]=n=>s.event.delete=!1),icon:""},{default:t(()=>[e(f,null,{default:t(()=>[d("mdi-close")]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[d(" Apakah anda yakin ingin menghapus kegiatan "),B("b",{textContent:v(a.event.name)},null,8,oe),d(" ? ")]),_:1}),e(S,null,{default:t(()=>[e(k),e(m,{onClick:W,density:"compact",color:"warning",loading:l.event.delete,disabled:l.event.delete},{default:t(()=>[d("Hapus")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ee,{ref_key:"msg",ref:c},null,512)],64)}}};export{re as default};
